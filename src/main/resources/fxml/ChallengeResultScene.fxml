<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane style="-fx-background-color: #f0f2f5; -fx-font-family: 'Roboto', 'Segoe UI';" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.memorygame.client.controller.ChallengeGameController">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="30" style="-fx-background-color: white; -fx-padding: 15 40; -fx-border-color: #e5e7eb; -fx-border-width: 0 0 1 0;">
            
            <Label style="-fx-font-size: 24px; -fx-font-weight: 700; -fx-text-fill: #1f2937;" text="Đấu Trường Trí Nhớ" />
            
            <Region HBox.hgrow="ALWAYS" />
            
            <HBox alignment="CENTER" spacing="15">
                <HBox alignment="CENTER" style="-fx-background-color: #eff6ff; -fx-background-radius: 10; -fx-padding: 8 15;">
                    <Label fx:id="lblTotalRounds" style="-fx-font-size: 14px; -fx-text-fill: #3b82f6; -fx-font-weight: 600;" text="Tổng Vòng: 10" />
                </HBox>
                <HBox alignment="CENTER" style="-fx-background-color: #fef2f2; -fx-background-radius: 10; -fx-padding: 8 15;">
                    <Label fx:id="lblMemorizeTime" style="-fx-font-size: 14px; -fx-text-fill: #ef4444; -fx-font-weight: 600;" text="Tạm dừng: 5s" />
                </HBox>
            </HBox>
            
            <Button onAction="#backToMenu" style="-fx-background-color: #e5e7eb; -fx-text-fill: #4b5563; -fx-font-size: 14px; -fx-background-radius: 10; -fx-padding: 10 20; -fx-font-weight: 600; -fx-cursor: hand;" text="Menu Chính" />
        </HBox>
    </top>

    <center>
        <VBox alignment="CENTER" spacing="40" style="-fx-padding: 40 0;">

            <HBox alignment="CENTER" spacing="60">
                
                <!-- Box điểm người chơi -->
                <VBox alignment="CENTER" spacing="8" style="-fx-background-color: #ffffff; -fx-padding: 30 40; -fx-pref-width: 280; -fx-background-radius: 20; -fx-border-color: #10b981; -fx-border-width: 3; -fx-border-radius: 20; -fx-effect: dropshadow(gaussian, rgba(16,185,129,0.3), 15, 0, 0, 5);">
                    <Label style="-fx-font-size: 18px; -fx-font-weight: 600; -fx-text-fill: #1f2937;" text="Bạn" />
                    <Label fx:id="lblPlayerScore" style="-fx-font-size: 40px; -fx-font-weight: 900; -fx-text-fill: #10b981;" text="0" />
                </VBox>

                <!-- ✅ Box điểm đối thủ - Hiển thị username -->
                <VBox alignment="CENTER" spacing="8" style="-fx-background-color: #ffffff; -fx-padding: 30 40; -fx-pref-width: 280; -fx-background-radius: 20; -fx-border-color: #f59e0b; -fx-border-width: 1; -fx-border-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 15, 0, 0, 5);">
                    <!-- ✅ Thêm Label để hiển thị tên đối thủ -->
                    <Label fx:id="lblOpponentName" style="-fx-font-size: 18px; -fx-font-weight: 600; -fx-text-fill: #1f2937;" text="Đối Thủ" />
                    <Label fx:id="lblOpponentScore" style="-fx-font-size: 40px; -fx-font-weight: 900; -fx-text-fill: #f59e0b;" text="0" />
                </VBox>
            </HBox>

            <HBox alignment="CENTER" spacing="30">
                <VBox alignment="CENTER" spacing="4" style="-fx-background-color: #ffffff; -fx-padding: 12 30; -fx-background-radius: 15; -fx-border-color: #d1d5db; -fx-border-width: 1;">
                    <Label style="-fx-font-size: 15px; -fx-text-fill: #6b7280; -fx-font-weight: 500;" text="Vòng Hiện Tại" />
                    <Label fx:id="lblCurrentRound" style="-fx-font-size: 26px; -fx-font-weight: 900; -fx-text-fill: #4f46e5;" text="01" />
                </VBox>
                <VBox alignment="CENTER" spacing="4" style="-fx-background-color: #ffffff; -fx-padding: 12 30; -fx-background-radius: 15; -fx-border-color: #d1d5db; -fx-border-width: 1;">
                    <Label style="-fx-font-size: 15px; -fx-text-fill: #6b7280; -fx-font-weight: 500;" text="Thời Gian" />
                    <Label fx:id="lblCountdown" style="-fx-font-size: 26px; -fx-font-weight: 900; -fx-text-fill: #ef4444;" text="05s" />
                </VBox>
                
                <Label fx:id="lblGameStatus" style="-fx-font-size: 18px; -fx-font-weight: 700; -fx-text-fill: #0ea5e9; -fx-padding: 15 0;" text="BẮT ĐẦU GHI NHỚ!" />
            </HBox>

            <StackPane alignment="CENTER" style="-fx-background-color: #e0f2fe; -fx-padding: 70; -fx-background-radius: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 40, 0.1, 0, 15); -fx-pref-width: 750; -fx-min-height: 250;">
                <Label fx:id="lblWord" style="-fx-font-size: 72px; -fx-font-weight: 900; -fx-text-fill: #1e40af;" text="Elephant" />
            </StackPane>

            <HBox alignment="CENTER" spacing="15" style="-fx-padding: 10 0 20 0;">
                <TextField fx:id="txtAnswer" prefWidth="450" promptText="Nhập chuỗi ký tự đã nhớ vào đây..." style="-fx-background-radius: 15; -fx-font-size: 16px; -fx-padding: 12 18; -fx-border-color: #d1d5db; -fx-border-radius: 15;" />
                <Button fx:id="btnSend" onAction="#sendAnswer" style="-fx-background-color: #7c3aed; -fx-text-fill: white; -fx-background-radius: 15; -fx-font-size: 18px; -fx-padding: 12 35; -fx-font-weight: 700; -fx-cursor: hand;" text="Gửi" />
            </HBox>

        </VBox>
    </center>
</BorderPane>