<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.Priority?>

<VBox alignment="TOP_CENTER" spacing="30"
      style="-fx-background-color: #f0f2f5; -fx-padding: 50 40 40 40; -fx-font-family: 'Roboto', 'Segoe UI';"
      xmlns="http://javafx.com/javafx/21"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.memorygame.client.controller.LeaderboardController">

    <!-- TIÊU ĐỀ + NÚT TẢI LẠI + QUAY LẠI -->
    <HBox alignment="CENTER_LEFT" spacing="15" maxWidth="850">
        <Label text="Bảng Xếp Hạng Thách Đấu"
               style="-fx-font-size: 32px; -fx-font-weight: 800; -fx-text-fill: #1e293b;" />
        
        <HBox HBox.hgrow="ALWAYS" />

        <!-- NÚT TẢI LẠI -->
        <Button fx:id="btnReload"
                onAction="#reloadLeaderboard"
                text="Tải Lại"
                style="-fx-background-color: #e0f2fe;
                       -fx-font-size: 16px;
                       -fx-font-weight: 600;
                       -fx-text-fill: #0c4a6e;
                       -fx-background-radius: 10;
                       -fx-padding: 10 20;
                       -fx-cursor: hand;">
            <graphic>
                <Label text="⟳" style="-fx-font-size: 18px;" />
            </graphic>
        </Button>

        <!-- NÚT QUAY LẠI (MỚI) -->
        <Button fx:id="btnBack"
                onAction="#goBack"
                style="-fx-background-color: #fef3c7;
                       -fx-font-size: 16px;
                       -fx-font-weight: 600;
                       -fx-text-fill: #92400e;
                       -fx-background-radius: 10;
                       -fx-padding: 10 24;
                       -fx-cursor: hand;
                       -fx-border-color: #f59e0b;
                       -fx-border-width: 2;
                       -fx-border-radius: 10;
                       -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 8, 0, 0, 2);">
            <graphic>
                <Label text="Quay Lại" style="-fx-font-size: 20px;" />
            </graphic>
            <tooltip>
                <Tooltip text="Quay lại menu chính" />
            </tooltip>
        </Button>
    </HBox>

    <!-- BẢNG XẾP HẠNG -->
    <TableView fx:id="tblRank"
               VBox.vgrow="ALWAYS"
               minHeight="500"
               maxWidth="850"
               style="-fx-background-color: white;
                      -fx-background-radius: 15;
                      -fx-border-color: #e2e8f0;
                      -fx-border-width: 1;
                      -fx-border-radius: 15;
                      -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 15, 0, 0, 5);">
        
        <columns>
            <TableColumn fx:id="colRank" text="Hạng" prefWidth="120" 
                         style="-fx-alignment: CENTER; -fx-font-weight: 700; -fx-text-fill: #7c3aed;"/>
            <TableColumn fx:id="colPlayer" text="Người chơi" prefWidth="480" />
            <TableColumn fx:id="colWins" text="Tỷ lệ Thắng" prefWidth="250" 
                         style="-fx-alignment: CENTER; -fx-font-weight: 600; -fx-text-fill: #10b981;"/>
        </columns>
        
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
        </columnResizePolicy>
    </TableView>

    <!-- PHÂN TRANG -->
    <HBox alignment="CENTER" spacing="20" style="-fx-padding: 10 0;">
        <Button text="« Trước" onAction="#prevPage"
                style="-fx-background-color: #e2e8f0;
                       -fx-text-fill: #475569;
                       -fx-background-radius: 12;
                       -fx-font-size: 16px;
                       -fx-padding: 10 25;
                       -fx-font-weight: 600;
                       -fx-cursor: hand;" />
                       
        <Label fx:id="lblPageInfo"
               text="Trang 1 / N"
               style="-fx-font-size: 16px; -fx-text-fill: #475569; -fx-font-weight: 600;" />
               
        <Button text="Sau »" onAction="#nextPage"
                style="-fx-background-color: #3b82f6;
                       -fx-text-fill: white;
                       -fx-background-radius: 12;
                       -fx-font-size: 16px;
                       -fx-padding: 10 25;
                       -fx-font-weight: 600;
                       -fx-cursor: hand;" />
    </HBox>

</VBox>